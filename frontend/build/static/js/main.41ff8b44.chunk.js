(this["webpackJsonphostel-app"]=this["webpackJsonphostel-app"]||[]).push([[0],{137:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(25),s=n.n(c),o=(n(137),n(10)),i=n(47),d=n(124),l=n(125),j=n(12),u=n.n(j),b=n(21),h="STUDENT_LIST_REQUEST",O="STUDENT_LIST_SUCCESS",p="STUDENT_LIST_ERROR",x="STUDENT_ADD_REQUEST",m="STUDENT_ADD_SUCCESS",f="STUDENT_ADD_ERROR",g="STUDENT_DETAILS_REQUEST",v="STUDENT_DETAILS_SUCCESS",y="STUDENT_DETAILS_ERROR",E="STUDENT_UPDATE_REQUEST",S="STUDENT_UPDATE_SUCCESS",T="STUDENT_UPDATE_ERROR",N="STUDENT_UPDATE_RESET",_="STUDENT_DELETE_REQUEST",C="STUDENT_DELETE_SUCCESS",I="STUDENT_DELETE_ERROR",A="STUDENT_DELETE_RESET",L="STUDENT_ROOM_NO_REQUEST",k="STUDENT_ROOM_NO_SUCCESS",U="STUDENT_ROOM_NO_ERROR",R="STUDENT_ROOM_NO_RESET",D=n(22),w=n.n(D),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(b.a)(u.a.mark((function n(a,r){var c,s,o,i,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:h}),c=r(),s=c.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(s.token)}},n.next=6,w.a.get("/student/all?keyword=".concat(e,"&pageNumber=").concat(t),o);case 6:i=n.sent,d=i.data,a({type:O,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:p,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:E}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.put("/student/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,n({type:S,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:T,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},P=n(23),B="USER_LOGIN_REQUEST",z="USER_LOGIN_SUCCESS",M="USER_LOGIN_FAIL",Q="USER_LOGOUT",H="USER_REGISTER_REQUEST",J="USER_REGISTER_SUCCESS",Y="USER_REGISTER_FAIL",V="USER_DETAILS_REQUEST",q="USER_DETAILS_SUCCESS",W="USER_DETAILS_FAIL",K="USER_DETAILS_RESET",X="USER_UPDATE_PROFILE_REQUEST",Z="USER_UPDATE_PROFILE_SUCCESS",$="USER_UPDATE_PROFILE_FAIL",ee="USER_UPDATE_PROFILE_RESET",te="USER_LIST_REQUEST",ne="USER_LIST_SUCCESS",ae="USER_LIST_FAIL",re="USER_LIST_RESET",ce="USER_DELETE_REQUEST",se="USER_DELETE_SUCCESS",oe="USER_DELETE_FAIL",ie="USER_UPDATE_REQUEST",de="USER_UPDATE_SUCCESS",le="USER_UPDATE_FAIL",je="USER_UPDATE_RESET",ue="ATTENDANCE_DATA_ENTER_REQUEST",be="ATTENDANCE_DATA_ENTER_SUCCESS",he="ATTENDANCE_DATA_ENTER_FAIL",Oe="ATTENDANCE_DATA_ENTER_RESET",pe="ATTENDANCE_ANALYSIS_REQUEST",xe="ATTENDANCE_ANALYSIS_SUCCESS",me="ATTENDANCE_ANALYSIS_FAIL",fe="ATTENDANCE_ANALYSIS_RESET",ge="ATTENDANCE_DELETE_REQUEST",ve="ATTENDANCE_DELETE_SUCCESS",ye="ATTENDANCE_DELETE_FAIL",Ee=Object(i.combineReducers)({studentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case O:return{loading:!1,students:t.payload.students,pages:t.payload.pages,page:t.payload.page};case p:return{loading:!1,error:t.payload};default:return e}},studentDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case v:return{loading:!1,student:t.payload};case y:return{loading:!1,error:t.payload};default:return e}},studentAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case m:return{loading:!1,success:!0};case f:return{loading:!1,error:t.payload};default:return e}},studentUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case S:return{loading:!1,success:!0};case T:return{loading:!1,error:t.payload};case N:return{};default:return e}},studentDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case C:return{loading:!1,success:!0};case I:return{loading:!1,error:t.payload};case A:return{};default:return e}},getStudentsByRoomNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case k:return{loading:!1,students:t.payload.students,attendance:t.payload.attendance};case U:return{loading:!1,error:t.payload};case R:return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{loading:!0};case z:return{loading:!1,userInfo:t.payload};case M:return{loading:!1,error:t.payload};case Q:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return{loading:!0};case J:return{loading:!1,userInfo:t.payload};case Y:return{loading:!1,error:t.payload};case Q:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case q:return{loading:!1,user:t.payload};case W:return{loading:!1,error:t.payload};case K:return{user:{}};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return{loading:!0};case Z:return{loading:!1,success:!0,userInfo:t.payload};case $:return{loading:!1,error:t.payload};case ee:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return{loading:!0};case ne:return{loading:!1,users:t.payload};case ae:return{loading:!1,error:t.payload};case re:return{users:[]};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return{loading:!0};case se:return{loading:!1,success:!0};case oe:return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return{loading:!0};case de:return{loading:!1,success:!0};case le:return{loading:!1,error:t.payload};case je:return{user:{}};default:return e}},attendanceDataEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return Object(P.a)(Object(P.a)({},e),{},{loading:!0});case be:return{loading:!1,attendance:t.payload};case he:return{loading:!1,error:t.payload};case Oe:return{};default:return e}},attendanceAnalysis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return{loading:!0};case xe:return{loading:!1,attendance:t.payload};case me:return{loading:!1,error:t.payload};case fe:return{};default:return e}},attendanceDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return{loading:!0};case ve:return{loading:!1,success:!0};case ye:return{loading:!1,error:t.payload};case fe:return{};default:return e}}}),Se={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Te=[d.a],Ne=Object(i.createStore)(Ee,Se,Object(l.composeWithDevTools)(i.applyMiddleware.apply(void 0,Te))),_e=n(11),Ce=n(251),Ie=n(238),Ae=n(239),Le=n(126),ke=n(15),Ue=function(e){var t=e.stuentDetails;return Object(a.jsxs)(Ce.a,{className:"my-3 p-3 rounded",children:[Object(a.jsx)(ke.Link,{to:"/student/".concat(t._id),children:Object(a.jsx)(Ie.a,{src:t.image,rounded:!0,fluid:!0})}),Object(a.jsxs)(Ce.a.Body,{children:[Object(a.jsx)(ke.Link,{to:"/student/".concat(t._id),children:Object(a.jsx)(Ce.a.Title,{as:"div",children:Object(a.jsx)("strong",{children:t.name})})}),Object(a.jsx)(Ae.a,{children:Object(a.jsxs)(Le.a,{children:["Room No: ",t.roomNo]})}),Object(a.jsx)(Ae.a,{children:Object(a.jsxs)(Le.a,{children:["Stream: ",t.category]})}),Object(a.jsxs)(Ce.a.Text,{children:["Contact:",Object(a.jsx)("a",{href:"tel:".concat(t.contact),children:t.contact})]})]})]})},Re=n(240),De=function(){return Object(a.jsx)(Re.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})},we=n(241),Fe=function(e){var t=e.variant,n=e.children;return Object(a.jsx)(we.a,{variant:t,children:n})};Fe.defaultProps={variant:"info"};var Ge=Fe,Pe=n(131),Be=n(252),ze=n(31),Me=function(e){var t=e.pages,n=e.page,r=e.isAdmin,c=void 0!==r&&r,s=e.keyword,o=void 0===s?"":s;return t>1&&Object(a.jsx)(Be.a,{children:Object(Pe.a)(Array(t).keys()).map((function(e){return Object(a.jsx)(ze.LinkContainer,{to:c?"/page/".concat(e+1):o?"/search/".concat(o,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(a.jsx)(Be.a.Item,{active:e+1===n,children:e+1})},e+1)}))})},Qe=n(243),He=n(244),Je=n(245),Ye=n(242),Ve=function(e){var t=e.keyword,n=e.pageNumber,c=Object(o.b)(),s=Object(o.c)((function(e){return e.studentsList})),i=s.loading,d=s.error,l=s.students,j=s.page,u=s.pages;return Object(r.useEffect)((function(){l||c(F(t,n))}),[c,t,n]),Object(a.jsx)(a.Fragment,{children:i?Object(a.jsx)(De,{}):d?Object(a.jsx)(Ge,{variant:"danger",children:d}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Stream"}),Object(a.jsx)("th",{children:"NAME"}),Object(a.jsx)("th",{children:"STATUS"}),Object(a.jsx)("th",{children:"CONTACT"}),Object(a.jsx)("th",{children:"ROOM NO"}),Object(a.jsx)("th",{children:"CITY"})]})}),Object(a.jsx)("tbody",{children:l.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.category}),Object(a.jsx)("td",{children:Object(a.jsx)(ke.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(a.jsx)("td",{children:Object(a.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(a.jsx)("td",{children:e.roomNo}),Object(a.jsx)("td",{children:e.city})]},e._id)}))})]}),Object(a.jsx)(Me,{pages:u,page:j,isAdmin:!0})]})})},qe=function(e){var t=e.match,n=e.history,c=Object(r.useState)(!0),s=Object(_e.a)(c,2),i=s[0],d=s[1],l=t.params.keyword,j=t.params.pageNumber||1,u=Object(o.c)((function(e){return e.userLogin})),b=u.loading,h=u.userInfo,O=Object(o.b)(),p=Object(o.c)((function(e){return e.studentsList})),x=p.loading,m=p.error,f=p.students,g=p.page,v=p.pages;return Object(r.useEffect)((function(){b||h||n.push("/login"),O(F(l,j))}),[l,j]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Qe.a,{children:Object(a.jsxs)(Ae.a,{className:"justify-content-md-center",children:[Object(a.jsx)(Le.a,{xs:!0,lg:"2"}),Object(a.jsx)(Le.a,{md:"auto",children:Object(a.jsx)(He.a,{toggle:!0,children:["Grid","Table"].map((function(e){return Object(a.jsx)(Je.a,{type:"radio",variant:"secondary",name:"radio",value:e,checked:(i?"Grid":"Table")===e,onChange:function(e){return d("Grid"===e.target.value)},children:"Grid"===e?Object(a.jsx)(a.Fragment,{children:" Grid"}):Object(a.jsx)(a.Fragment,{children:" Table "})},e)}))})}),Object(a.jsx)(Le.a,{xs:!0,lg:"2"})]})})}),Object(a.jsx)("h1",{children:"Students"}),x?Object(a.jsx)(De,{}):m?Object(a.jsx)(Ge,{variant:"danger",children:m}):i?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ae.a,{children:f.map((function(e){return Object(a.jsx)(Le.a,{sm:12,md:6,lg:4,xl:3,children:Object(a.jsx)(Ue,{stuentDetails:e})},e._id)}))}),Object(a.jsx)(Me,{pages:v,page:g,keyword:l||""})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Ve,{keyword:l,pageNumber:j})})]})},We=n(19),Ke=n(250),Xe=n(246),Ze=n(247),$e=n(249),et=n(76),tt=function(e){var t=e.history,n=Object(r.useState)(""),c=Object(_e.a)(n,2),s=c[0],o=c[1];return Object(a.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),s.trim()?t.push("/search/".concat(s)):t.push("/")},inline:!0,children:[Object(a.jsx)($e.a.Control,{type:"text",value:s,name:"q",placeholder:"Search students...",className:"mr-sm-2 ml-sm-5",onChange:function(e){return o(e.target.value)}}),Object(a.jsx)(et.a,{className:"p-2",type:"submit",variant:"outline-success",children:"Search"})]})},nt=function(){return function(e){localStorage.removeItem("userInfo"),e({type:Q}),e({type:K}),e({type:re}),document.location.href="/login"}},at=function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:V}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.get("/users/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:q,payload:i}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:W,payload:d});case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},rt=function(e){var t=e.history,n=Object(o.b)(),r=Object(o.c)((function(e){return e.userLogin})).userInfo;return Object(a.jsx)("header",{children:Object(a.jsx)(Ke.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(a.jsxs)(Qe.a,{children:[Object(a.jsx)(ze.LinkContainer,{to:"/",children:Object(a.jsx)(Ke.a.Brand,{children:"Gndec Hostel 1"})}),Object(a.jsx)(Ke.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(Ke.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsx)(We.d,{render:function(e){var t=e.history;return Object(a.jsx)(tt,{history:t})}}),Object(a.jsxs)(Xe.a,{className:"ml-auto",children:[Object(a.jsxs)(Ze.a,{title:"More",children:[Object(a.jsx)(ze.LinkContainer,{to:"/attendance",children:Object(a.jsx)(Ze.a.Item,{children:"Attendance"})}),Object(a.jsx)(ze.LinkContainer,{to:"/addStudent",children:Object(a.jsx)(Ze.a.Item,{children:"Add Student"})}),Object(a.jsx)(ze.LinkContainer,{to:"/analysis",children:Object(a.jsx)(Ze.a.Item,{children:"View Analysis"})})]}),r?Object(a.jsxs)(Ze.a,{title:r.name,id:"username",children:[Object(a.jsx)(ze.LinkContainer,{to:"/profile",children:Object(a.jsx)(Ze.a.Item,{children:"Profile"})}),r.isAdmin&&Object(a.jsx)(ze.LinkContainer,{to:"/userList",children:Object(a.jsx)(Ze.a.Item,{children:"Users List"})}),Object(a.jsx)(Ze.a.Item,{onClick:function(){n(nt()),t.push("/login")},children:"Logout"})]}):Object(a.jsx)(ze.LinkContainer,{to:"/login",children:Object(a.jsxs)(Xe.a.Link,{children:[Object(a.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})]})]})})})},ct=function(){return Object(a.jsx)(Qe.a,{children:Object(a.jsx)(Ae.a,{children:Object(a.jsx)(Le.a,{className:"text-center py-3",children:"Copyright Gndec Ludhiana"})})})},st=function(e){var t=e.children;return Object(a.jsx)(Qe.a,{children:Object(a.jsx)(Ae.a,{className:"justify-content-md-center",children:Object(a.jsx)(Le.a,{xs:12,md:6,children:t})})})},ot=function(){var e=Object(We.k)(),t=Object(r.useState)(!1),n=Object(_e.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),d=Object(_e.a)(i,2),l=d[0],j=d[1],h=Object(r.useState)(""),O=Object(_e.a)(h,2),p=O[0],g=O[1],v=Object(r.useState)(""),y=Object(_e.a)(v,2),E=y[0],S=y[1],T=Object(r.useState)(""),_=Object(_e.a)(T,2),C=_[0],I=_[1],A=Object(r.useState)(""),L=Object(_e.a)(A,2),k=L[0],U=L[1],R=Object(r.useState)(""),D=Object(_e.a)(R,2),F=D[0],P=D[1],B=Object(r.useState)(""),z=Object(_e.a)(B,2),M=z[0],Q=z[1],H=Object(r.useState)(""),J=Object(_e.a)(H,2),Y=J[0],V=J[1],q=Object(r.useState)(""),W=Object(_e.a)(q,2),K=W[0],X=W[1],Z=Object(r.useState)("Hostel"),$=Object(_e.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.b)(),ae=Object(o.c)((function(e){return e.studentAdd})),re=ae.loading,ce=ae.error,se=ae.success,oe=Object(o.c)((function(e){return e.studentUpdate})),ie=oe.loading,de=oe.error,le=oe.success;Object(r.useEffect)((function(){if(le&&(ne({type:N}),e.push("/")),e.location.state&&e.location.state.studentProps){s(!0);var t=e.location.state.studentProps;j(t.name),g(t.address),S(t.category),I(t.city),U(t.contact),P(t.fatherContact),Q(t.image),V(t.roomNo),X(t.blockNo),te(t.status)}se&&e.push("/")}),[ne,e,se,le]);var je=function(){if(!0===c){var t=e.location.state.studentProps._id;ne(G({_id:t,name:l,address:p,category:E,city:C,contact:k,fatherContact:F,image:M,roomNo:Y,blockNo:K,status:ee}))}else ne((n={name:l,address:p,category:E,city:C,contact:k,fatherContact:F,image:M,roomNo:Y,blockNo:K,status:ee},function(){var e=Object(b.a)(u.a.mark((function e(t,a){var r,c,s,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:x}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,w.a.post("/student/addStudent",n,s);case 6:o=e.sent,i=o.data,t({type:m,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:f,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));var n};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ke.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),re||ie?Object(a.jsx)(De,{}):Object(a.jsxs)(a.Fragment,{children:[de&&Object(a.jsx)(Ge,{variant:"danger",children:de}),Object(a.jsxs)(st,{children:[Object(a.jsx)("h1",{children:c?"Edit Student":"Add Student"}),re&&Object(a.jsx)(De,{}),ce&&Object(a.jsx)(Ge,{variant:"danger",children:ce}),Object(a.jsx)($e.a,{onSubmit:je}),Object(a.jsxs)($e.a.Group,{controlId:"name",children:[Object(a.jsx)($e.a.Label,{children:"Name"}),Object(a.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"status",children:[Object(a.jsx)($e.a.Label,{children:"Status"}),Object(a.jsx)($e.a.Control,{as:"select",value:ee,onChange:function(e){return te(e.target.value)},children:["Hostel","Outside","Home"].map((function(e){return Object(a.jsx)("option",{value:e+1,children:e},e+1)}))})]}),Object(a.jsxs)($e.a.Group,{controlId:"address",children:[Object(a.jsx)($e.a.Label,{children:"Address"}),Object(a.jsx)($e.a.Control,{type:"text",placeholder:"Enter address",value:p,onChange:function(e){return g(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"city",children:[Object(a.jsx)($e.a.Label,{children:"City"}),Object(a.jsx)($e.a.Control,{type:"text",placeholder:"Enter city",value:C,onChange:function(e){return I(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"contact",children:[Object(a.jsx)($e.a.Label,{children:"Contact"}),Object(a.jsx)($e.a.Control,{type:"number",placeholder:"Enter phone number",value:k,onChange:function(e){return U(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"fatherContact",children:[Object(a.jsx)($e.a.Label,{children:"Father Contact"}),Object(a.jsx)($e.a.Control,{type:"number",placeholder:"Enter Father Phone Number",value:F,onChange:function(e){return P(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"roomNo",children:[Object(a.jsx)($e.a.Label,{children:"Room No"}),Object(a.jsx)($e.a.Control,{type:"text",placeholder:"Enter Room no",value:Y,onChange:function(e){return V(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"b",children:[Object(a.jsx)($e.a.Label,{children:"Block Number"}),Object(a.jsx)($e.a.Control,{type:"text",placeholder:"Enter Block Number",value:K,onChange:function(e){return X(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"image",children:[Object(a.jsx)($e.a.Label,{children:"Image Url"}),Object(a.jsx)($e.a.Control,{type:"text",placeholder:"Enter Image Url",value:M,onChange:function(e){return Q(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"category",children:[Object(a.jsx)($e.a.Label,{children:"Category"}),Object(a.jsx)($e.a.Control,{type:"text",placeholder:"Enter Stream",value:E,onChange:function(e){return S(e.target.value)}})]}),Object(a.jsx)(et.a,{type:"submit",variant:"primary",onClick:je,children:c?"Update":"Add Student"})]})]})]})},it=n(248),dt=n(128),lt=n.n(dt),jt=(n(165),function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:pe}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.post("/attendance/getAnalysis",{date:e},s);case 6:o=t.sent,i=o.data,n({type:xe,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:me,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}),ut=n(127),bt=function(){var e=Object(o.c)((function(e){return e.attendanceAnalysis})),t=e.loading,n=e.error,c=e.attendance,s=Object(r.useState)([]),i=Object(_e.a)(s,2),d=i[0],l=i[1],j=Object(r.useState)([]),u=Object(_e.a)(j,2),b=u[0],h=u[1];return Object(r.useEffect)((function(){if(c){h([{label:"Name",key:"name"},{label:"Contact",key:"contact"},{label:"Room No",key:"roomNo"},{label:"Status",key:"attendance"}]);var e=[];Object.entries(c.details).map((function(t){var n={};n.name=t[1].name,n.contact=t[1].contact,n.roomNo=t[1].roomNo,n.attendance=c.data[t[0]],e.push(n)})),l(e)}}),[c]),Object(a.jsxs)(a.Fragment,{children:[n&&Object(a.jsx)(Ge,{variant:"danger",children:n}),t?Object(a.jsx)(De,{}):Object(a.jsx)(a.Fragment,{children:c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Contact No"}),Object(a.jsx)("th",{children:"Room No"}),Object(a.jsx)("th",{children:"Attendance"})]})}),Object(a.jsx)("tbody",{children:c&&Object.entries(c.details).map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:e[1].name}),Object(a.jsx)("td",{children:e[1].contact}),Object(a.jsx)("td",{children:e[1].roomNo}),Object(a.jsx)("td",{children:c.data[e[0]]})]},e[0])}))})]}),Object(a.jsx)(ut.CSVLink,{data:d,headers:b,filename:"attendance_".concat(Date().toString().substring(0,15),".csv"),className:"btn btn-primary",children:"Download"})]})})]})},ht=function(){var e=Object(o.b)(),t=Object(r.useState)(!1),n=Object(_e.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(0),d=Object(_e.a)(i,2),l=d[0],j=d[1],h=Object(r.useState)([]),O=Object(_e.a)(h,2),p=O[0],x=O[1],m=Object(r.useState)(new Date),f=Object(_e.a)(m,2),g=f[0],v=f[1],y=Object(o.c)((function(e){return e.attendanceAnalysis})).attendance,E=Object(o.c)((function(e){return e.attendanceDelete})),S=E.loading,T=E.success,N=E.error;Object(r.useEffect)((function(){if(y){var t=p;Object.entries(y.details).map((function(e){t.push(e[0])})),x(t)}else e(jt(g.toString().substring(0,15)))}),[y,e]);var _=function(){s(!1)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Ae.a,{className:"flex justify-content-between",children:[Object(a.jsx)(ke.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(a.jsx)("div",{style:{height:"40px",display:"flex"},children:Object(a.jsx)(et.a,{variant:"outline-danger",size:"sm",onClick:function(){s(!0)},children:"Delete Attendance"})})]}),S&&Object(a.jsx)(De,{}),N&&Object(a.jsx)(Ge,{variant:"success",children:N}),T&&Object(a.jsx)(Ge,{variant:"success",children:"Attendance Deleted"}),Object(a.jsxs)(Le.a,{children:[Object(a.jsxs)(Ae.a,{children:[Object(a.jsxs)(Le.a,{children:[Object(a.jsx)(Ae.a,{children:"Analysis for "}),Object(a.jsx)("strong",{children:g.toISOString().toString().substring(0,10)})]}),Object(a.jsx)(Le.a,{children:Object(a.jsx)(lt.a,{selected:g,onChange:function(t){return function(t){e(jt(t.toString().substring(0,15))),v(t)}(t)}})})]}),Object(a.jsxs)(it.a,{show:c,animation:!0,onHide:_,children:[Object(a.jsx)(it.a.Header,{closeButton:!0,children:Object(a.jsx)(it.a.Title,{children:"Enter Number of days before to delete"})}),Object(a.jsx)(it.a.Body,{children:Object(a.jsx)($e.a,{children:Object(a.jsxs)($e.a.Group,{controlId:"days",children:[Object(a.jsx)($e.a.Label,{children:"Enter no of days"}),Object(a.jsx)($e.a.Control,{type:"number",placeholder:"Enter days",value:l,onChange:function(e){return j(e.target.value)}})]})})}),Object(a.jsxs)(it.a.Footer,{children:[Object(a.jsx)(et.a,{variant:"secondary",onClick:_,children:"Close"}),Object(a.jsx)(et.a,{variant:"outline-danger",onClick:function(){s(!1),e(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ge}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.delete("/attendance/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:ve,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:ye,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(l))},children:"Delete"})]})]}),Object(a.jsx)(bt,{})]})]})},Ot=function(e){var t=e.location,n=e.history,c=Object(r.useState)(""),s=Object(_e.a)(c,2),i=s[0],d=s[1],l=Object(r.useState)(""),j=Object(_e.a)(l,2),h=j[0],O=j[1],p=Object(o.b)(),x=Object(o.c)((function(e){return e.userLogin})),m=x.loading,f=x.error,g=x.userInfo,v=t.search?t.search.split("=")[1]:"/";Object(r.useEffect)((function(){g&&n.push(v)}),[n,g,v]);return Object(a.jsxs)(st,{children:[Object(a.jsx)("h1",{children:"Sign In"}),f&&Object(a.jsx)(Ge,{variant:"danger",children:f}),m&&Object(a.jsx)(De,{}),Object(a.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),p(function(e,t){return function(){var n=Object(b.a)(u.a.mark((function n(a){var r,c,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:B}),r={headers:{"Content-Type":"application/json"}},n.next=5,w.a.post("/users/login",{email:e,password:t},r);case 5:c=n.sent,s=c.data,a({type:z,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:M,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(i,h))},children:[Object(a.jsxs)($e.a.Group,{controlId:"email",children:[Object(a.jsx)($e.a.Label,{children:"Email Address"}),Object(a.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"password",children:[Object(a.jsx)($e.a.Label,{children:"Password"}),Object(a.jsx)($e.a.Control,{type:"password",placeholder:"Enter password",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(a.jsx)(et.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(a.jsx)(Ae.a,{className:"py-3",children:Object(a.jsxs)(Le.a,{children:["New Customer?"," ",Object(a.jsx)(ke.Link,{to:v?"/register?redirect=".concat(v):"/register",children:"Register"})]})})]})},pt=function(e){var t=e.location,n=e.history,c=Object(r.useState)(""),s=Object(_e.a)(c,2),i=s[0],d=s[1],l=Object(r.useState)(""),j=Object(_e.a)(l,2),h=j[0],O=j[1],p=Object(r.useState)(""),x=Object(_e.a)(p,2),m=x[0],f=x[1],g=Object(r.useState)(""),v=Object(_e.a)(g,2),y=v[0],E=v[1],S=Object(r.useState)(null),T=Object(_e.a)(S,2),N=T[0],_=T[1],C=Object(o.b)(),I=Object(o.c)((function(e){return e.userRegister})),A=I.loading,L=I.error,k=I.userInfo,U=t.search?t.search.split("=")[1]:"/";Object(r.useEffect)((function(){k&&n.push(U)}),[n,k,U]);return Object(a.jsxs)(st,{children:[Object(a.jsx)("h1",{children:"Sign Up"}),N&&Object(a.jsx)(Ge,{variant:"danger",children:N}),L&&Object(a.jsx)(Ge,{variant:"danger",children:L}),A&&Object(a.jsx)(De,{}),Object(a.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),m!==y?_("Passwords do not match"):C(function(e,t,n){return function(){var a=Object(b.a)(u.a.mark((function a(r){var c,s,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:H}),c={headers:{"Content-Type":"application/json"}},a.next=5,w.a.post("/users",{name:e,email:t,password:n},c);case 5:s=a.sent,o=s.data,r({type:J,payload:o}),r({type:z,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),r({type:Y,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(i,h,m))},children:[Object(a.jsxs)($e.a.Group,{controlId:"name",children:[Object(a.jsx)($e.a.Label,{children:"Name"}),Object(a.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"email",children:[Object(a.jsx)($e.a.Label,{children:"Email Address"}),Object(a.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"password",children:[Object(a.jsx)($e.a.Label,{children:"Password"}),Object(a.jsx)($e.a.Control,{type:"password",placeholder:"Enter password",value:m,onChange:function(e){return f(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"confirmPassword",children:[Object(a.jsx)($e.a.Label,{children:"Confirm Password"}),Object(a.jsx)($e.a.Control,{type:"password",placeholder:"Confirm password",value:y,onChange:function(e){return E(e.target.value)}})]}),Object(a.jsx)(et.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(a.jsx)(Ae.a,{className:"py-3",children:Object(a.jsxs)(Le.a,{children:["Have an Account?"," ",Object(a.jsx)(ke.Link,{to:U?"/login?redirect=".concat(U):"/login",children:"Login"})]})})]})},xt=n(253),mt=function(e){var t=e.match,n=e.history,c=Object(r.useState)(""),s=Object(_e.a)(c,2),i=s[0],d=s[1],l=Object(o.b)(),j=Object(o.c)((function(e){return e.studentDetails})),h=j.loading,O=j.error,p=j.student,x=Object(o.c)((function(e){return e.studentUpdate})),m=x.loading,f=x.error,E=x.success,S=Object(o.c)((function(e){return e.studentDelete})),T=S.loading,A=S.error,L=S.success;Object(r.useEffect)((function(){var e;L&&n.push("/"),E&&l({type:N}),p&&p._id&&p._id===t.params.id||l((e=t.params.id,function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:g}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.get("/student/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:v,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:y,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())),p&&p._id&&!i&&d(p.status)}),[l,t,E,L]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ke.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),h||m||T?Object(a.jsx)(De,{}):O?Object(a.jsx)(Ge,{variant:"danger",children:O}):Object(a.jsxs)(a.Fragment,{children:[f&&Object(a.jsx)(Ge,{variant:"danger",children:f}),A&&Object(a.jsx)(Ge,{variant:"danger",children:A}),p&&Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Le.a,{md:3,children:Object(a.jsx)(Ie.a,{src:p.image,alt:p.name,fluid:!0})}),Object(a.jsx)(Le.a,{md:3,children:Object(a.jsxs)(xt.a,{variant:"flush",children:[Object(a.jsx)(xt.a.Item,{children:Object(a.jsx)("h3",{children:p.name})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)("span",{children:["Phone No:",p.contact]})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)("span",{children:["Father Contact:",p.fatherContact]})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)("span",{children:["City:",p.city]})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)("span",{children:["Address:",p.address]})})]})}),Object(a.jsx)(Le.a,{md:4,children:Object(a.jsx)(Ce.a,{children:Object(a.jsxs)(xt.a,{variant:"flush",children:[Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Le.a,{children:"Room No:"}),Object(a.jsxs)(Le.a,{children:[" ",p.roomNo]})]})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Le.a,{children:"Block No:"}),Object(a.jsxs)(Le.a,{children:[" ",p.blockNo]})]})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(Le.a,{children:"Status:"}),Object(a.jsx)(Le.a,{children:Object(a.jsx)($e.a.Control,{size:"sm",as:"select",value:i,onChange:function(e){return d(e.target.value)},children:["Hostel","Outside","Home"].map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})})]})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsx)(et.a,{className:"btn-block",type:"button",onClick:function(){p.status=i,l(G(p))},children:"Update"})})]})})}),Object(a.jsx)(Le.a,{children:Object(a.jsx)(xt.a,{variant:"flush",children:Object(a.jsxs)(Ae.a,{children:[Object(a.jsx)(xt.a.Item,{variant:"secondary",children:Object(a.jsx)(et.a,{onClick:function(){n.push({pathname:"/student/edit/".concat(p._id),state:{studentProps:p}})},children:Object(a.jsx)("i",{className:"fas fa-edit"})})}),Object(a.jsx)(xt.a.Item,{children:Object(a.jsx)(et.a,{variant:"danger",onClick:function(){var e;window.confirm("Are you sure")&&l((e=p._id,function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:_}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.delete("/student/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:C,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:I,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()))},children:Object(a.jsx)("i",{className:"fas fa-trash"})})})]})})})]})]})]})},ft=function(e){var t=e.students,n=e.attendanceMap,c=e.setAttendanceMap,s=e.attendance,i=e.roomNo,d=Object(o.b)();Object(r.useEffect)((function(){}),[d,n]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"NAME"}),Object(a.jsx)("th",{children:"Attendance"}),Object(a.jsx)("th",{children:"STATUS"}),Object(a.jsx)("th",{children:"CONTACT"}),Object(a.jsx)("th",{children:"CITY"})]})}),Object(a.jsx)("tbody",{children:t&&t.map((function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(ke.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(a.jsx)("td",{children:Object(a.jsx)($e.a,{children:Object(a.jsx)($e.a.Group,{controlId:"status",children:Object(a.jsxs)($e.a.Control,{as:"select",size:"sm",defaultValue:n[e._id],onChange:function(t){var a=n;a[e._id]=t.target.value,c(a)},children:[Object(a.jsx)("option",{children:"Hostel"}),Object(a.jsx)("option",{children:"Home"}),Object(a.jsx)("option",{children:"outside"})]})})})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(a.jsx)("td",{children:Object(a.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(a.jsx)("td",{children:e.city})]},e._id)})}))})]}),Object(a.jsx)(et.a,{variant:"success",onClick:function(){s&&(s.roomNo.includes(i)||s.roomNo.push(i));var e=s?s.roomNo:i,a=n,r=s?s.details:{};t.map((function(e){r[e._id]={name:e.name,contact:e.contact,roomNo:e.roomNo}})),d(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ue}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.post("/attendance/",e,s);case 6:o=t.sent,i=o.data,n({type:be,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:he,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}({roomNo:e,details:r,data:a}))},children:"Update Attendance"})]})},gt=function(e){var t=e.roomNo,n=Object(o.b)(),c=Object(r.useState)({}),s=Object(_e.a)(c,2),i=s[0],d=s[1],l=Object(o.c)((function(e){return e.getStudentsByRoomNo})),j=l.loading,u=l.error,b=l.students,h=l.attendance,O=Object(o.c)((function(e){return e.attendanceDataEnter})),p=O.loading,x=O.error;Object(r.useEffect)((function(){b&&m()}),[n,h,i,b]);var m=function(){if(h){var e=i;b.map((function(t){h.data[t._id]?e[t._id]=h.data[t._id]:e[t._id]="Hostel"})),d(i)}else b.map((function(e){var t=i;t[e._id]="Hostel",d(t)}));d(i)};return Object(a.jsxs)(a.Fragment,{children:[u&&Object(a.jsx)(Ge,{variant:"danger",children:u}),j||p?Object(a.jsx)(De,{}):Object(a.jsxs)(a.Fragment,{children:[x&&Object(a.jsx)(Ge,{variant:"danger",children:x}),b&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(ft,{students:b,attendanceMap:i,setAttendanceMap:d,attendance:h,roomNo:t})})]})]})},vt=function(){var e=Object(r.useState)(""),t=Object(_e.a)(e,2),n=t[0],c=t[1],s=Object(o.b)();Object(r.useEffect)((function(){}),[s]);var i=function(e){e.preventDefault(),s(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:L}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.get("/student/room/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:k,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:U,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(n))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Take Attendance"}),Object(a.jsxs)($e.a,{onSubmit:i,inline:!0,children:[Object(a.jsx)($e.a.Control,{type:"text",value:n,name:"roomNo",placeholder:"Enter RoomNo",className:"mr-sm-2 ml-sm-5",onChange:function(e){return function(e){c(e.target.value)}(e)}}),Object(a.jsx)(et.a,{type:"submit",onClick:i,children:"Get Students"})]}),Object(a.jsx)(gt,{roomNo:n})]})},yt=function(e){var t=e.history,n=Object(r.useState)(""),c=Object(_e.a)(n,2),s=c[0],i=c[1],d=Object(r.useState)(""),l=Object(_e.a)(d,2),j=l[0],h=l[1],O=Object(r.useState)(""),p=Object(_e.a)(O,2),x=p[0],m=p[1],f=Object(r.useState)(""),g=Object(_e.a)(f,2),v=g[0],y=g[1],E=Object(r.useState)(null),S=Object(_e.a)(E,2),T=S[0],N=S[1],_=Object(o.b)(),C=Object(o.c)((function(e){return e.userDetails})),I=C.loading,A=C.error,L=C.user,k=Object(o.c)((function(e){return e.userLogin})).userInfo,U=Object(o.c)((function(e){return e.userUpdateProfile})).success;Object(r.useEffect)((function(){k?L&&L.name&&!U?(i(L.name),h(L.email)):(_({type:ee}),_(at("profile"))):t.push("/login")}),[_,t,k,L,U]);return Object(a.jsx)(Ae.a,{children:Object(a.jsxs)(Le.a,{md:3,children:[Object(a.jsx)("h2",{children:"Profile"}),T&&Object(a.jsx)(Ge,{variant:"danger",children:T}),U&&Object(a.jsx)(Ge,{variant:"success",children:"Profile Updated"}),I?Object(a.jsx)(De,{}):A?Object(a.jsx)(Ge,{variant:"danger",children:A}):Object(a.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),x!==v?N("Passwords do not match"):_(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:X}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.put("/users/profile",e,s);case 6:o=t.sent,i=o.data,n({type:Z,payload:i}),n({type:z,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:$,payload:d});case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}({id:L._id,name:s,email:j,password:x}))},children:[Object(a.jsxs)($e.a.Group,{controlId:"name",children:[Object(a.jsx)($e.a.Label,{children:"Name"}),Object(a.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"email",children:[Object(a.jsx)($e.a.Label,{children:"Email Address"}),Object(a.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:j,onChange:function(e){return h(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"password",children:[Object(a.jsx)($e.a.Label,{children:"Password"}),Object(a.jsx)($e.a.Control,{type:"password",placeholder:"Enter password",value:x,onChange:function(e){return m(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"confirmPassword",children:[Object(a.jsx)($e.a.Label,{children:"Confirm Password"}),Object(a.jsx)($e.a.Control,{type:"password",placeholder:"Confirm password",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(a.jsx)(et.a,{type:"submit",variant:"primary",children:"Update"})]})]})})},Et=function(e){var t=e.history,n=Object(o.b)(),c=Object(o.c)((function(e){return e.userList})),s=c.loading,i=c.error,d=c.users,l=Object(o.c)((function(e){return e.userLogin})).userInfo,j=Object(o.c)((function(e){return e.userDelete})).success;Object(r.useEffect)((function(){l&&l.isAdmin?n(function(){var e=Object(b.a)(u.a.mark((function e(t,n){var a,r,c,s,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:te}),a=n(),r=a.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,w.a.get("/users",c);case 6:s=e.sent,o=s.data,t({type:ne,payload:o}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),"Not authorized, token failed"===(i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(nt()),t({type:ae,payload:i});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()):t.push("/login")}),[n,t,j,l]);var h=function(e){window.confirm("Are you sure")&&n(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ce}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.delete("/users/".concat(e),s);case 6:n({type:se}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),"Not authorized, token failed"===(o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:oe,payload:o});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Users"}),s?Object(a.jsx)(De,{}):i?Object(a.jsx)(Ge,{variant:"danger",children:i}):Object(a.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"ID"}),Object(a.jsx)("th",{children:"NAME"}),Object(a.jsx)("th",{children:"EMAIL"}),Object(a.jsx)("th",{children:"ADMIN"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:d.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e._id}),Object(a.jsx)("td",{children:e.name}),Object(a.jsx)("td",{children:Object(a.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(a.jsx)("td",{children:e.isAdmin?Object(a.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(a.jsx)("i",{className:"fas fa-times",style:{color:"red"}})}),Object(a.jsxs)("td",{children:[Object(a.jsx)(ze.LinkContainer,{to:"/user/".concat(e._id,"/edit"),children:Object(a.jsx)(et.a,{variant:"light",className:"btn-sm",children:Object(a.jsx)("i",{className:"fas fa-edit"})})}),Object(a.jsx)(et.a,{variant:"danger",className:"btn-sm",onClick:function(){return h(e._id)},children:Object(a.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})]})},St=function(e){var t=e.match,n=e.history,c=t.params.userId,s=Object(r.useState)(""),i=Object(_e.a)(s,2),d=i[0],l=i[1],j=Object(r.useState)(""),h=Object(_e.a)(j,2),O=h[0],p=h[1],x=Object(r.useState)(!1),m=Object(_e.a)(x,2),f=m[0],g=m[1],v=Object(o.b)(),y=Object(o.c)((function(e){return e.userDetails})),E=y.loading,S=y.error,T=y.user,N=Object(o.c)((function(e){return e.userUpdate})),_=N.loading,C=N.error,I=N.success;Object(r.useEffect)((function(){console.log(c),I?(v({type:je}),n.push("/userList")):T&&T.name&&T._id===c?(l(T.name),p(T.email),g(T.isAdmin)):v(at(c))}),[v,n,c,T,I]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ke.Link,{to:"/admin/userList",className:"btn btn-light my-3",children:"Go Back"}),Object(a.jsxs)(st,{children:[Object(a.jsx)("h1",{children:"Edit User"}),_&&Object(a.jsx)(De,{}),C&&Object(a.jsx)(Ge,{variant:"danger",children:C}),E?Object(a.jsx)(De,{}):S?Object(a.jsx)(Ge,{variant:"danger",children:S}):Object(a.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),v(function(e){return function(){var t=Object(b.a)(u.a.mark((function t(n,a){var r,c,s,o,i,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ie}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,w.a.put("/users/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,n({type:de}),n({type:q,payload:i}),n({type:K}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:le,payload:d});case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}({_id:c,name:d,email:O,isAdmin:f}))},children:[Object(a.jsxs)($e.a.Group,{controlId:"name",children:[Object(a.jsx)($e.a.Label,{children:"Name"}),Object(a.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:d,onChange:function(e){return l(e.target.value)}})]}),Object(a.jsxs)($e.a.Group,{controlId:"email",children:[Object(a.jsx)($e.a.Label,{children:"Email Address"}),Object(a.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:O,onChange:function(e){return p(e.target.value)}})]}),Object(a.jsx)($e.a.Group,{controlId:"isadmin",children:Object(a.jsx)($e.a.Check,{type:"checkbox",label:"Is Admin",checked:f,onChange:function(e){return g(e.target.checked)}})}),Object(a.jsx)(et.a,{type:"submit",variant:"primary",children:"Update"})]})]})]})},Tt=function(){return Object(a.jsxs)(ke.BrowserRouter,{children:[Object(a.jsx)(rt,{}),Object(a.jsx)("main",{className:"py-3",children:Object(a.jsxs)(Qe.a,{children:[Object(a.jsx)(We.d,{path:"/user/:userId/edit",component:St}),Object(a.jsx)(We.d,{path:"/userList",component:Et}),Object(a.jsx)(We.d,{path:"/profile",component:yt}),Object(a.jsx)(We.d,{path:"/attendance",component:vt}),Object(a.jsx)(We.d,{path:"/analysis",component:ht}),Object(a.jsx)(We.d,{path:"/addStudent",component:ot}),Object(a.jsx)(We.d,{path:"/student/edit/:id",component:ot,exact:!0}),Object(a.jsx)(We.d,{path:"/student/:id",component:mt,exact:!0}),Object(a.jsx)(We.d,{path:"/login",component:Ot,exact:!0}),Object(a.jsx)(We.d,{path:"/register",component:pt,exact:!0}),Object(a.jsx)(We.d,{path:"/search/:keyword",component:qe,exact:!0}),Object(a.jsx)(We.d,{path:"/page/:pageNumber",component:qe,exact:!0}),Object(a.jsx)(We.d,{path:"/search/:keyword/page/:pageNumber",component:qe,exact:!0}),Object(a.jsx)(We.d,{path:"/",component:qe,exact:!0})]})}),Object(a.jsx)(ct,{})]})},Nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,254)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(228);s.a.render(Object(a.jsx)(o.a,{store:Ne,children:Object(a.jsx)(Tt,{})}),document.getElementById("root")),Nt()}},[[229,1,2]]]);
//# sourceMappingURL=main.41ff8b44.chunk.js.map