{"ast":null,"code":"import _slicedToArray from\"/React/Hostel-Management-master/server/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{Row,Col,Button,Modal,Form}from\"react-bootstrap\";import DatePicker from\"react-datepicker\";import{useDispatch,useSelector}from\"react-redux\";import\"react-datepicker/dist/react-datepicker.css\";import{deleteAttendanceByDate,getAnalysisByDate}from\"../actions/attendanceActions\";import AnalysisComponent from\"../components/analysisComponent\";import Loading from\"../components/loader\";import Message from\"../components/message\";var AnalysisView=function AnalysisView(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),days=_useState4[0],setDays=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),idList=_useState6[0],setIdList=_useState6[1];var _useState7=useState(new Date()),_useState8=_slicedToArray(_useState7,2),startDate=_useState8[0],setStartDate=_useState8[1];var attendanceAnalysis=useSelector(function(state){return state.attendanceAnalysis;});var attendance=attendanceAnalysis.attendance;var attendanceDelete=useSelector(function(state){return state.attendanceDelete;});var loadingDelete=attendanceDelete.loading,successDelete=attendanceDelete.success,errorDelete=attendanceDelete.error;useEffect(function(){if(attendance){var temp=idList;Object.entries(attendance.details).map(function(at){temp.push(at[0]);});setIdList(temp);}else{dispatch(getAnalysisByDate(startDate.toString().substring(0,15)));}},[attendance,dispatch]);var changeDate=function changeDate(date){dispatch(getAnalysisByDate(date.toString().substring(0,15)));setStartDate(date);};var showModal=function showModal(){setModal(true);};var closeModal=function closeModal(){setModal(false);};var startDelete=function startDelete(){setModal(false);dispatch(deleteAttendanceByDate(days));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"flex justify-content-between\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-light my-3\",children:\"Go Back\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"40px\",display:\"flex\"},children:/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",size:\"sm\",onClick:showModal,children:\"Delete Attendance\"})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loading,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:errorDelete}),successDelete&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Attendance Deleted\"}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Row,{children:\"Analysis for \"}),/*#__PURE__*/_jsx(\"strong\",{children:startDate.toISOString().toString().substring(0,10)})]}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(DatePicker,{selected:startDate,onChange:function onChange(date){return changeDate(date);}})})]}),/*#__PURE__*/_jsxs(Modal,{show:modal,animation:true,onHide:closeModal,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Enter Number of days before to delete\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"days\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Enter no of days\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter days\",value:days,onChange:function onChange(e){return setDays(e.target.value);}})]})})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:closeModal,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:startDelete,children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(AnalysisComponent,{})]})]});};export default AnalysisView;","map":{"version":3,"sources":["/React/Hostel-Management-master/server/frontend/src/screens/analysisView.jsx"],"names":["React","useState","useEffect","Link","Row","Col","Button","Modal","Form","DatePicker","useDispatch","useSelector","deleteAttendanceByDate","getAnalysisByDate","AnalysisComponent","Loading","Message","AnalysisView","dispatch","modal","setModal","days","setDays","idList","setIdList","Date","startDate","setStartDate","attendanceAnalysis","state","attendance","attendanceDelete","loadingDelete","loading","successDelete","success","errorDelete","error","temp","Object","entries","details","map","at","push","toString","substring","changeDate","date","showModal","closeModal","startDelete","height","display","toISOString","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Row, Col, Button, Modal, Form } from \"react-bootstrap\";\nimport DatePicker from \"react-datepicker\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {\n  deleteAttendanceByDate,\n  getAnalysisByDate,\n} from \"../actions/attendanceActions\";\nimport AnalysisComponent from \"../components/analysisComponent\";\nimport Loading from \"../components/loader\";\nimport Message from \"../components/message\";\n\nconst AnalysisView = () => {\n  const dispatch = useDispatch();\n  const [modal, setModal] = useState(false);\n  const [days, setDays] = useState(0);\n  const [idList, setIdList] = useState([]);\n  const [startDate, setStartDate] = useState(new Date());\n  const attendanceAnalysis = useSelector((state) => state.attendanceAnalysis);\n  const { attendance } = attendanceAnalysis;\n  const attendanceDelete = useSelector((state) => state.attendanceDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete,\n  } = attendanceDelete;\n  useEffect(() => {\n    if (attendance) {\n      var temp = idList;\n      Object.entries(attendance.details).map((at) => {\n        temp.push(at[0]);\n      });\n\n      setIdList(temp);\n    } else {\n      dispatch(getAnalysisByDate(startDate.toString().substring(0, 15)));\n    }\n  }, [attendance, dispatch]);\n\n  const changeDate = (date) => {\n    dispatch(getAnalysisByDate(date.toString().substring(0, 15)));\n    setStartDate(date);\n  };\n  const showModal = () => {\n    setModal(true);\n  };\n  const closeModal = () => {\n    setModal(false);\n  };\n\n  const startDelete = () => {\n    setModal(false);\n    dispatch(deleteAttendanceByDate(days));\n  };\n\n  return (\n    <>\n      <Row className=\"flex justify-content-between\">\n        <Link to=\"/\" className=\"btn btn-light my-3\">\n          Go Back\n        </Link>\n        <div style={{ height: \"40px\", display: \"flex\" }}>\n          <Button variant=\"outline-danger\" size=\"sm\" onClick={showModal}>\n            Delete Attendance\n          </Button>\n        </div>\n      </Row>\n      {loadingDelete && <Loading />}\n      {errorDelete && <Message variant=\"success\">{errorDelete}</Message>}\n      {successDelete && <Message variant=\"success\">Attendance Deleted</Message>}\n\n      <Col>\n        <Row>\n          <Col>\n            <Row>Analysis for </Row>\n            <strong>\n              {startDate.toISOString().toString().substring(0, 10)}\n            </strong>\n          </Col>\n          <Col>\n            <DatePicker\n              selected={startDate}\n              onChange={(date) => changeDate(date)}\n            />\n          </Col>\n        </Row>\n        <Modal show={modal} animation={true} onHide={closeModal}>\n          <Modal.Header closeButton>\n            <Modal.Title>Enter Number of days before to delete</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <Form>\n              <Form.Group controlId=\"days\">\n                <Form.Label>Enter no of days</Form.Label>\n                <Form.Control\n                  type=\"number\"\n                  placeholder=\"Enter days\"\n                  value={days}\n                  onChange={(e) => setDays(e.target.value)}\n                ></Form.Control>\n              </Form.Group>\n            </Form>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={closeModal}>\n              Close\n            </Button>\n            <Button variant=\"outline-danger\" onClick={startDelete}>\n              Delete\n            </Button>\n          </Modal.Footer>\n        </Modal>\n        {<AnalysisComponent />}\n      </Col>\n    </>\n  );\n};\n\nexport default AnalysisView;\n"]},"metadata":{},"sourceType":"module"}