{"ast":null,"code":"import _slicedToArray from\"/React/Hostel-Management-master/server/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{Button,Form}from\"react-bootstrap\";import{Link,useHistory}from\"react-router-dom\";import FormContainer from\"../components/formContainer\";import{useDispatch,useSelector}from\"react-redux\";import{addStudent,updateStudent}from\"../actions/studentActions\";import Loading from\"../components/loader.jsx\";import Message from\"../components/message.jsx\";import{STUDENT_UPDATE_RESET}from\"../constants/studentConstant\";import Loader from\"../components/loader\";var AddStudentView=function AddStudentView(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEdit=_useState2[0],setIsEdit=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),address=_useState6[0],setAddress=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),city=_useState10[0],setCity=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),contact=_useState12[0],setContact=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),fatherContact=_useState14[0],setFatherContact=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),image=_useState16[0],setImage=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),roomNo=_useState18[0],setRoomNo=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),blockNo=_useState20[0],setBlockNo=_useState20[1];var _useState21=useState(\"Hostel\"),_useState22=_slicedToArray(_useState21,2),status=_useState22[0],setStatus=_useState22[1];var dispatch=useDispatch();var studentAdd=useSelector(function(state){return state.studentAdd;});var loading=studentAdd.loading,error=studentAdd.error,success=studentAdd.success;var studentUpdate=useSelector(function(state){return state.studentUpdate;});var loadingUpdate=studentUpdate.loading,errorUpdate=studentUpdate.error,successUpdate=studentUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:STUDENT_UPDATE_RESET});history.push(\"/\");}if(history.location.state&&history.location.state.studentProps){setIsEdit(true);var student=history.location.state.studentProps;setName(student.name);setAddress(student.address);setCategory(student.category);setCity(student.city);setContact(student.contact);setFatherContact(student.fatherContact);setImage(student.image);setRoomNo(student.roomNo);setBlockNo(student.blockNo);setStatus(student.status);}if(success){history.push(\"/\");}},[dispatch,history,success,successUpdate]);var submitHandler=function submitHandler(){if(isEdit===true){var _id=history.location.state.studentProps._id;dispatch(updateStudent({_id:_id,name:name,address:address,category:category,city:city,contact:contact,fatherContact:fatherContact,image:image,roomNo:roomNo,blockNo:blockNo,status:status}));}else{dispatch(addStudent({name:name,address:address,category:category,city:city,contact:contact,fatherContact:fatherContact,image:image,roomNo:roomNo,blockNo:blockNo,status:status}));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-light my-3\",children:\"Go Back\"}),loading||loadingUpdate?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:isEdit?\"Edit Student\":\"Add Student\"}),loading&&/*#__PURE__*/_jsx(Loading,{}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(Form,{onSubmit:submitHandler}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"status\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Status\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:status,onChange:function onChange(e){return setStatus(e.target.value);},children:[\"Hostel\",\"Outside\",\"Home\"].map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x},x+1);})})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"address\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter address\",value:address,onChange:function onChange(e){return setAddress(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"city\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"City\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter city\",value:city,onChange:function onChange(e){return setCity(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"contact\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Contact\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter phone number\",value:contact,onChange:function onChange(e){return setContact(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"fatherContact\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Father Contact\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter Father Phone Number\",value:fatherContact,onChange:function onChange(e){return setFatherContact(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"roomNo\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Room No\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Room no\",value:roomNo,onChange:function onChange(e){return setRoomNo(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"b\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Block Number\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Block Number\",value:blockNo,onChange:function onChange(e){return setBlockNo(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Image Url\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Image Url\",value:image,onChange:function onChange(e){return setImage(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Stream\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",onClick:submitHandler,children:isEdit?\"Update\":\"Add Student\"})]})]})]});};export default AddStudentView;","map":{"version":3,"sources":["/React/Hostel-Management-master/server/frontend/src/screens/addStudentView.jsx"],"names":["React","useState","useEffect","Button","Form","Link","useHistory","FormContainer","useDispatch","useSelector","addStudent","updateStudent","Loading","Message","STUDENT_UPDATE_RESET","Loader","AddStudentView","history","isEdit","setIsEdit","name","setName","address","setAddress","category","setCategory","city","setCity","contact","setContact","fatherContact","setFatherContact","image","setImage","roomNo","setRoomNo","blockNo","setBlockNo","status","setStatus","dispatch","studentAdd","state","loading","error","success","studentUpdate","loadingUpdate","errorUpdate","successUpdate","type","push","location","studentProps","student","submitHandler","_id","e","target","value","map","x"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport FormContainer from \"../components/formContainer\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addStudent, updateStudent } from \"../actions/studentActions\";\nimport Loading from \"../components/loader.jsx\";\nimport Message from \"../components/message.jsx\";\nimport { STUDENT_UPDATE_RESET } from \"../constants/studentConstant\";\nimport Loader from \"../components/loader\";\n\nconst AddStudentView = () => {\n  const history = useHistory();\n  const [isEdit, setIsEdit] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [contact, setContact] = useState(\"\");\n  const [fatherContact, setFatherContact] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [roomNo, setRoomNo] = useState(\"\");\n  const [blockNo, setBlockNo] = useState(\"\");\n  const [status, setStatus] = useState(\"Hostel\");\n\n  const dispatch = useDispatch();\n  const studentAdd = useSelector((state) => state.studentAdd);\n  const { loading, error, success } = studentAdd;\n  const studentUpdate = useSelector((state) => state.studentUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = studentUpdate;\n\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({ type: STUDENT_UPDATE_RESET });\n      history.push(\"/\");\n    }\n    if (history.location.state && history.location.state.studentProps) {\n      setIsEdit(true);\n      const student = history.location.state.studentProps;\n      setName(student.name);\n      setAddress(student.address);\n      setCategory(student.category);\n      setCity(student.city);\n      setContact(student.contact);\n      setFatherContact(student.fatherContact);\n      setImage(student.image);\n      setRoomNo(student.roomNo);\n      setBlockNo(student.blockNo);\n      setStatus(student.status);\n    }\n    if (success) {\n      history.push(\"/\");\n    }\n  }, [dispatch, history, success, successUpdate]);\n\n  const submitHandler = () => {\n    if (isEdit === true) {\n      const _id = history.location.state.studentProps._id;\n      dispatch(\n        updateStudent({\n          _id,\n          name,\n          address,\n          category,\n          city,\n          contact,\n          fatherContact,\n          image,\n          roomNo,\n          blockNo,\n          status,\n        })\n      );\n    } else {\n      dispatch(\n        addStudent({\n          name,\n          address,\n          category,\n          city,\n          contact,\n          fatherContact,\n          image,\n          roomNo,\n          blockNo,\n          status,\n        })\n      );\n    }\n  };\n\n  return (\n    <>\n      <Link to=\"/\" className=\"btn btn-light my-3\">\n        Go Back\n      </Link>\n\n      {loading || loadingUpdate ? (\n        <Loader />\n      ) : (\n        <>\n          {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\n          <FormContainer>\n            <h1>{isEdit ? \"Edit Student\" : \"Add Student\"}</h1>\n            {loading && <Loading />}\n            {error && <Message variant=\"danger\">{error}</Message>}\n            <Form onSubmit={submitHandler}></Form>\n            <Form.Group controlId=\"name\">\n              <Form.Label>Name</Form.Label>\n              <Form.Control\n                type=\"name\"\n                placeholder=\"Enter name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"status\">\n              <Form.Label>Status</Form.Label>\n              <Form.Control\n                as=\"select\"\n                value={status}\n                onChange={(e) => setStatus(e.target.value)}\n              >\n                {[\"Hostel\", \"Outside\", \"Home\"].map((x) => (\n                  <option key={x + 1} value={x + 1}>\n                    {x}\n                  </option>\n                ))}\n              </Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"address\">\n              <Form.Label>Address</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter address\"\n                value={address}\n                onChange={(e) => setAddress(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"city\">\n              <Form.Label>City</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter city\"\n                value={city}\n                onChange={(e) => setCity(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"contact\">\n              <Form.Label>Contact</Form.Label>\n              <Form.Control\n                type=\"number\"\n                placeholder=\"Enter phone number\"\n                value={contact}\n                onChange={(e) => setContact(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"fatherContact\">\n              <Form.Label>Father Contact</Form.Label>\n              <Form.Control\n                type=\"number\"\n                placeholder=\"Enter Father Phone Number\"\n                value={fatherContact}\n                onChange={(e) => setFatherContact(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"roomNo\">\n              <Form.Label>Room No</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter Room no\"\n                value={roomNo}\n                onChange={(e) => setRoomNo(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"b\">\n              <Form.Label>Block Number</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter Block Number\"\n                value={blockNo}\n                onChange={(e) => setBlockNo(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"image\">\n              <Form.Label>Image Url</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter Image Url\"\n                value={image}\n                onChange={(e) => setImage(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Form.Group controlId=\"category\">\n              <Form.Label>Category</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter Stream\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n            <Button type=\"submit\" variant=\"primary\" onClick={submitHandler}>\n              {isEdit ? \"Update\" : \"Add Student\"}\n            </Button>\n          </FormContainer>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default AddStudentView;\n"]},"metadata":{},"sourceType":"module"}