{"ast":null,"code":"import _slicedToArray from\"/home/mrrobot/React/Hostel-Management-master/server/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{Table}from\"react-bootstrap\";import{useSelector}from\"react-redux\";import Loading from\"./loader\";import Message from\"./message\";import{CSVLink}from\"react-csv\";var AnalysisComponent=function AnalysisComponent(){var attendanceAnalysis=useSelector(function(state){return state.attendanceAnalysis;});var loading=attendanceAnalysis.loading,error=attendanceAnalysis.error,attendance=attendanceAnalysis.attendance;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),headers=_useState4[0],setHeaders=_useState4[1];useEffect(function(){if(attendance){setHeaders([{label:\"Name\",key:\"name\"},{label:\"Contact\",key:\"contact\"},{label:\"Room No\",key:\"roomNo\"},{label:\"Status\",key:\"attendance\"}]);var csvMapList=[];Object.entries(attendance.details).map(function(student){var csvMap={};csvMap[\"name\"]=student[1].name;csvMap[\"contact\"]=student[1].contact;csvMap[\"roomNo\"]=student[1].roomNo;csvMap[\"attendance\"]=attendance.data[student[0]];csvMapList.push(csvMap);});setData(csvMapList);}},[attendance]);return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(_Fragment,{children:attendance&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contact No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Room No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Attendance\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:attendance&&Object.entries(attendance.details).map(function(student){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:student[1].name}),/*#__PURE__*/_jsx(\"td\",{children:student[1].contact}),/*#__PURE__*/_jsx(\"td\",{children:student[1].roomNo}),/*#__PURE__*/_jsx(\"td\",{children:attendance.data[student[0]]})]},student[0]);})})]}),/*#__PURE__*/_jsx(CSVLink,{data:data,headers:headers,filename:\"attendance_\".concat(Date().toString().substring(0,15),\".csv\"),className:\"btn btn-primary\",children:\"Download\"})]})})]});};export default AnalysisComponent;","map":{"version":3,"sources":["/home/mrrobot/React/Hostel-Management-master/server/frontend/src/components/analysisComponent.jsx"],"names":["React","useEffect","useState","Table","useSelector","Loading","Message","CSVLink","AnalysisComponent","attendanceAnalysis","state","loading","error","attendance","data","setData","headers","setHeaders","label","key","csvMapList","Object","entries","details","map","student","csvMap","name","contact","roomNo","push","Date","toString","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Table } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport Loading from \"./loader\";\nimport Message from \"./message\";\nimport { CSVLink } from \"react-csv\";\n\nconst AnalysisComponent = () => {\n  const attendanceAnalysis = useSelector((state) => state.attendanceAnalysis);\n  const { loading, error, attendance } = attendanceAnalysis;\n  const [data, setData] = useState([]);\n  const [headers, setHeaders] = useState([]);\n  useEffect(() => {\n    if (attendance) {\n      setHeaders([\n        { label: \"Name\", key: \"name\" },\n        { label: \"Contact\", key: \"contact\" },\n        { label: \"Room No\", key: \"roomNo\" },\n        { label: \"Status\", key: \"attendance\" },\n      ]);\n      var csvMapList = [];\n      Object.entries(attendance.details).map((student) => {\n        var csvMap = {};\n        csvMap[\"name\"] = student[1].name;\n        csvMap[\"contact\"] = student[1].contact;\n        csvMap[\"roomNo\"] = student[1].roomNo;\n        csvMap[\"attendance\"] = attendance.data[student[0]];\n        csvMapList.push(csvMap);\n      });\n\n      setData(csvMapList);\n    }\n  }, [attendance]);\n  return (\n    <>\n      {error && <Message variant=\"danger\">{error}</Message>}\n      {loading ? (\n        <Loading />\n      ) : (\n        <>\n          {attendance && (\n            <>\n              <Table striped bordered hover responsive className=\"table-sm\">\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Contact No</th>\n                    <th>Room No</th>\n                    <th>Attendance</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {attendance &&\n                    Object.entries(attendance.details).map((student) => {\n                      return (\n                        <tr key={student[0]}>\n                          <th>{student[1].name}</th>\n                          <td>{student[1].contact}</td>\n                          <td>{student[1].roomNo}</td>\n                          <td>{attendance.data[student[0]]}</td>\n                        </tr>\n                      );\n                    })}\n                </tbody>\n              </Table>\n              <CSVLink\n                data={data}\n                headers={headers}\n                filename={`attendance_${Date()\n                  .toString()\n                  .substring(0, 15)}.csv`}\n                className=\"btn btn-primary\"\n              >\n                Download\n              </CSVLink>\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default AnalysisComponent;\n"]},"metadata":{},"sourceType":"module"}