{"ast":null,"code":"import _slicedToArray from\"/home/mrrobot/React/Hostel-Management-master/server/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import Loading from\"./loader\";import Message from\"./message\";import AttendanceTableComponent from\"./attendanceTableComponent\";var AttendanceTable=function AttendanceTable(_ref){var roomNo=_ref.roomNo;var dispatch=useDispatch();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),attendanceMap=_useState2[0],setAttendanceMap=_useState2[1];var getStudentsByRoomNo=useSelector(function(state){return state.getStudentsByRoomNo;});var loading=getStudentsByRoomNo.loading,error=getStudentsByRoomNo.error,students=getStudentsByRoomNo.students,attendance=getStudentsByRoomNo.attendance;var attendanceDataEnter=useSelector(function(state){return state.attendanceDataEnter;});var loadingAttendance=attendanceDataEnter.loading,errorAttendance=attendanceDataEnter.error;useEffect(function(){if(students){arrangeTable();}},[dispatch,attendance,attendanceMap,students]);var arrangeTable=function arrangeTable(){if(attendance){var tempMap=attendanceMap;students.map(function(student){if(attendance.data[student._id]){tempMap[student._id]=attendance.data[student._id];}else{tempMap[student._id]=\"Hostel\";}});setAttendanceMap(attendanceMap);}else{students.map(function(student){var temp=attendanceMap;temp[student._id]=\"Hostel\";setAttendanceMap(temp);});}var temp=attendanceMap;setAttendanceMap(temp);};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading||loadingAttendance?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[errorAttendance&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorAttendance}),students&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(AttendanceTableComponent,{students:students,attendanceMap:attendanceMap,setAttendanceMap:setAttendanceMap,attendance:attendance,roomNo:roomNo})})]})]});};export default AttendanceTable;","map":{"version":3,"sources":["/home/mrrobot/React/Hostel-Management-master/server/frontend/src/components/attendanceTable.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","Loading","Message","AttendanceTableComponent","AttendanceTable","roomNo","dispatch","attendanceMap","setAttendanceMap","getStudentsByRoomNo","state","loading","error","students","attendance","attendanceDataEnter","loadingAttendance","errorAttendance","arrangeTable","tempMap","map","student","data","_id","temp"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Loading from \"./loader\";\nimport Message from \"./message\";\nimport AttendanceTableComponent from \"./attendanceTableComponent\";\n\nconst AttendanceTable = ({ roomNo }) => {\n  const dispatch = useDispatch();\n  const [attendanceMap, setAttendanceMap] = useState({});\n\n  const getStudentsByRoomNo = useSelector((state) => state.getStudentsByRoomNo);\n  const { loading, error, students, attendance } = getStudentsByRoomNo;\n  const attendanceDataEnter = useSelector((state) => state.attendanceDataEnter);\n  const {\n    loading: loadingAttendance,\n    error: errorAttendance,\n  } = attendanceDataEnter;\n  useEffect(() => {\n    if (students) {\n      arrangeTable();\n    }\n  }, [dispatch, attendance, attendanceMap, students]);\n\n  const arrangeTable = () => {\n    if (attendance) {\n      var tempMap = attendanceMap;\n      students.map((student) => {\n        if (attendance.data[student._id]) {\n          tempMap[student._id] = attendance.data[student._id];\n        } else {\n          tempMap[student._id] = \"Hostel\";\n        }\n      });\n      setAttendanceMap(attendanceMap);\n    } else {\n      students.map((student) => {\n        var temp = attendanceMap;\n        temp[student._id] = \"Hostel\";\n        setAttendanceMap(temp);\n      });\n    }\n    var temp = attendanceMap;\n    setAttendanceMap(temp);\n  };\n\n  return (\n    <>\n      {error && <Message variant=\"danger\">{error}</Message>}\n      {loading || loadingAttendance ? (\n        <Loading />\n      ) : (\n        <>\n          {errorAttendance && (\n            <Message variant=\"danger\">{errorAttendance}</Message>\n          )}\n          {students && (\n            <>\n              <AttendanceTableComponent\n                students={students}\n                attendanceMap={attendanceMap}\n                setAttendanceMap={setAttendanceMap}\n                attendance={attendance}\n                roomNo={roomNo}\n              />\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default AttendanceTable;\n"]},"metadata":{},"sourceType":"module"}