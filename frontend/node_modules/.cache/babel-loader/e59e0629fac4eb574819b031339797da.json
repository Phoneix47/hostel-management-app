{"ast":null,"code":"import _slicedToArray from\"/home/mrrobot/React/Hostel-Management-master/server/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{Row,Col,Image,ListGroup,Card,Button,Form}from\"react-bootstrap\";import Loading from\"../components/loader\";import Message from\"../components/message\";import{getStudentDetails,updateStudent,deleteStudent}from\"../actions/studentActions\";import{STUDENT_UPDATE_RESET}from\"../constants/studentConstant\";var StudentDetailsView=function StudentDetailsView(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var dispatch=useDispatch();var studentDetails=useSelector(function(state){return state.studentDetails;});var loading=studentDetails.loading,error=studentDetails.error,student=studentDetails.student;var studentUpdate=useSelector(function(state){return state.studentUpdate;});var loadingUpdate=studentUpdate.loading,errorUpdate=studentUpdate.error,successUpdate=studentUpdate.success;var studentDelete=useSelector(function(state){return state.studentDelete;});var loadingDelete=studentDelete.loading,errorDelete=studentDelete.error,successDelete=studentDelete.success;useEffect(function(){if(successDelete){history.push(\"/\");}if(successUpdate){dispatch({type:STUDENT_UPDATE_RESET});}if(!student||!student._id||student._id!==match.params.id){dispatch(getStudentDetails(match.params.id));}if(student&&student._id&&!status){setStatus(student.status);}},[dispatch,match,successUpdate,successDelete]);var navigateToEdit=function navigateToEdit(){history.push({pathname:\"/student/edit/\".concat(student._id),state:{studentProps:student}});};var updateStatus=function updateStatus(){student.status=status;dispatch(updateStudent(student));};var deleteStuden=function deleteStuden(){if(window.confirm(\"Are you sure\")){dispatch(deleteStudent(student._id));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-light my-3\",to:\"/\",children:\"Go Back\"}),loading||loadingUpdate||loadingDelete?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),student&&/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Image,{src:student.image,alt:student.name,fluid:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h3\",{children:student.name})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Phone No:\",student.contact]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Father Contact:\",student.fatherContact]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"City:\",student.city]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Address:\",student.address]})})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Room No:\"}),/*#__PURE__*/_jsxs(Col,{children:[\" \",student.roomNo]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Block No:\"}),/*#__PURE__*/_jsxs(Col,{children:[\" \",student.blockNo]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status:\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{size:\"sm\",as:\"select\",value:status,onChange:function onChange(e){return setStatus(e.target.value);},children:[\"Hostel\",\"Outside\",\"Home\"].map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x,children:x},x);})})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{className:\"btn-block\",type:\"button\",onClick:updateStatus,children:\"Update\"})})]})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(ListGroup.Item,{variant:\"secondary\",children:/*#__PURE__*/_jsx(Button,{onClick:navigateToEdit,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:deleteStuden,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})})})]})]})]});};export default StudentDetailsView;","map":{"version":3,"sources":["/home/mrrobot/React/Hostel-Management-master/server/frontend/src/screens/studentDetailsView.jsx"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Card","Button","Form","Loading","Message","getStudentDetails","updateStudent","deleteStudent","STUDENT_UPDATE_RESET","StudentDetailsView","match","history","status","setStatus","dispatch","studentDetails","state","loading","error","student","studentUpdate","loadingUpdate","errorUpdate","successUpdate","success","studentDelete","loadingDelete","errorDelete","successDelete","push","type","_id","params","id","navigateToEdit","pathname","studentProps","updateStatus","deleteStuden","window","confirm","image","name","contact","fatherContact","city","address","roomNo","blockNo","e","target","value","map","x"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  Row,\n  Col,\n  Image,\n  ListGroup,\n  Card,\n  Button,\n  Form,\n} from \"react-bootstrap\";\nimport Loading from \"../components/loader\";\nimport Message from \"../components/message\";\nimport {\n  getStudentDetails,\n  updateStudent,\n  deleteStudent,\n} from \"../actions/studentActions\";\nimport { STUDENT_UPDATE_RESET } from \"../constants/studentConstant\";\nconst StudentDetailsView = ({ match, history }) => {\n  const [status, setStatus] = useState(\"\");\n  const dispatch = useDispatch();\n  const studentDetails = useSelector((state) => state.studentDetails);\n  const { loading, error, student } = studentDetails;\n  const studentUpdate = useSelector((state) => state.studentUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = studentUpdate;\n  const studentDelete = useSelector((state) => state.studentDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = studentDelete;\n\n  useEffect(() => {\n    if (successDelete) {\n      history.push(\"/\");\n    }\n    if (successUpdate) {\n      dispatch({ type: STUDENT_UPDATE_RESET });\n    }\n    if (!student || !student._id || student._id !== match.params.id) {\n      dispatch(getStudentDetails(match.params.id));\n    }\n    if (student && student._id && !status) {\n      setStatus(student.status);\n    }\n  }, [dispatch, match, successUpdate, successDelete]);\n\n  const navigateToEdit = () => {\n    history.push({\n      pathname: `/student/edit/${student._id}`,\n      state: { studentProps: student },\n    });\n  };\n  const updateStatus = () => {\n    student.status = status;\n    dispatch(updateStudent(student));\n  };\n\n  const deleteStuden = () => {\n    if (window.confirm(\"Are you sure\")) {\n      dispatch(deleteStudent(student._id));\n    }\n  };\n  return (\n    <>\n      <Link className=\"btn btn-light my-3\" to=\"/\">\n        Go Back\n      </Link>\n      {loading || loadingUpdate || loadingDelete ? (\n        <Loading />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <>\n          {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\n          {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n          {student && (\n            <Row>\n              <Col md={3}>\n                <Image src={student.image} alt={student.name} fluid />\n              </Col>\n              <Col md={3}>\n                <ListGroup variant=\"flush\">\n                  <ListGroup.Item>\n                    <h3>{student.name}</h3>\n                  </ListGroup.Item>\n                  <ListGroup.Item>\n                    <span>Phone No:{student.contact}</span>\n                  </ListGroup.Item>\n                  <ListGroup.Item>\n                    <span>Father Contact:{student.fatherContact}</span>\n                  </ListGroup.Item>\n                  <ListGroup.Item>\n                    <span>City:{student.city}</span>\n                  </ListGroup.Item>\n                  <ListGroup.Item>\n                    <span>Address:{student.address}</span>\n                  </ListGroup.Item>\n                </ListGroup>\n              </Col>\n              <Col md={4}>\n                <Card>\n                  <ListGroup variant=\"flush\">\n                    <ListGroup.Item>\n                      <Row>\n                        <Col>Room No:</Col>\n                        <Col> {student.roomNo}</Col>\n                      </Row>\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                      <Row>\n                        <Col>Block No:</Col>\n                        <Col> {student.blockNo}</Col>\n                      </Row>\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                      <Row>\n                        <Col>Status:</Col>\n                        <Col>\n                          <Form.Control\n                            size=\"sm\"\n                            as=\"select\"\n                            value={status}\n                            onChange={(e) => setStatus(e.target.value)}\n                          >\n                            {[\"Hostel\", \"Outside\", \"Home\"].map((x) => (\n                              <option key={x} value={x}>\n                                {x}\n                              </option>\n                            ))}\n                          </Form.Control>\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                      <Button\n                        className=\"btn-block\"\n                        type=\"button\"\n                        onClick={updateStatus}\n                      >\n                        Update\n                      </Button>\n                    </ListGroup.Item>\n                  </ListGroup>\n                </Card>\n              </Col>\n              <Col>\n                <ListGroup variant=\"flush\">\n                  <Row>\n                    <ListGroup.Item variant=\"secondary\">\n                      <Button onClick={navigateToEdit}>\n                        <i className=\"fas fa-edit\"></i>\n                      </Button>\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                      <Button variant=\"danger\" onClick={deleteStuden}>\n                        <i className=\"fas fa-trash\"></i>\n                      </Button>\n                    </ListGroup.Item>\n                  </Row>\n                </ListGroup>\n              </Col>\n            </Row>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default StudentDetailsView;\n"]},"metadata":{},"sourceType":"module"}